{% extends 'base.html' %} 

{% block title %}
    Get weather - Home
{% endblock title %}

{% block main %}
<br><br>
{% with mensagens = get_flashed_messages(with_categories=true) %}
    {% if mensagens%}
        {% for categoria, mensagem in mensagens %}
            {% if categoria == 'sucesso' %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ mensagem }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endif %}
            {% if categoria == 'erro' %}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    {{ mensagem }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endwith %}
<div class="container">

<img class="mx-auto d-block"  src="{{ url_for('static', filename='img/icone.png') }}" alt="logo" style="width: 4rem;">
<h1 class="text-center" style="color:dodgerblue;">Get Weather</h1> <br>
<div id="demo" class="carousel slide" data-ride="carousel">
    <ul class="carousel-indicators">
      <li data-target="#demo" data-slide-to="0" class="active"></li>
      <li data-target="#demo" data-slide-to="1"></li>
      <li data-target="#demo" data-slide-to="2"></li>
    </ul>
    <div class="carousel-inner">
      <div class="carousel-item active">

        <img src="{{ url_for('static', filename='img/paris.jpg') }}" alt="paris" width="1100" height="500">
        <div class="carousel-caption">
          <h3>Mais de 200.000 cidades possíveis</h3>
          <p>Entre agora e aproveite</p>
        </div>   
      </div>
      <div class="carousel-item">
        <img src="{{ url_for('static', filename='img/imgem_nevasca.jpg') }}" alt="inverno" width="1100" height="500">
        <div class="carousel-caption">
          <h3>Esteja sempre preparado para o clima que for</h3>
          <p>Nosso site o informará do clima atual e previsão do tempo para os próximos 5 dias</p>
        </div>   
      </div>
      <div class="carousel-item">
        <img src="{{ url_for('static', filename='img/montanha.jpg') }}" alt="montanha" width="1100" height="500">
        <div class="carousel-caption">
          <h3>Onde você estiver</h3>
          <p>Nosso site se preocupa com os usuários. Entre e comprove.</p>
        </div>   
      </div>
    </div>
    <a class="carousel-control-prev" href="#demo" data-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </a>
    <a class="carousel-control-next" href="#demo" data-slide="next">
      <span class="carousel-control-next-icon"></span>
    </a>
  </div>
  

<br><br>

        <h1 class="text-center">Avaliação do site:</h1>
        {% if media != None %}
            <h3 style="padding-top: 2rem;" class="text-center">Nota média: {{media}}</h3>
        {% else %}
            <h3  style="padding-top: 2rem;" class="text-center">Nenhuma avaliação do site foi feita. Volte mais tarde</h3>
        {% endif %}
        
    <br>

    {% if avaliacoes %}
      <h3 style="padding-top: 2rem; padding-bottom: 2rem;">Avaliações:</h3>
    {% endif %}


    {% for avaliacao in avaliacoes %} 
        <div class="row">
            <div class="col">
                <div class="card card-white post">
                    <div class="post-heading">
                        <div class="float-left image">
                            <img src="static/{{ avaliacao.caminho_foto }}" class="img-circle avatar"  alt="foto usuário">
                        </div>
                        <div class="float-left meta">
                            <div class="title h5">
                                <b>{{avaliacao.nome_usuario}}</b>
                                fez uma avaliação com a nota: {{avaliacao.nota}}
                            </div>
                            <h6 class="text-muted time">{{avaliacao.data}}</h6>
                        </div>
                    </div> 
                    <div class="post-description"> 
                        <p>{{avaliacao.comentario}}</p>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <br>
    {%endfor%}

    <br><br><br><br><br><br>

{% endblock main%}